<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Import Bookmark HTML</title>
</head>
<body>
  <div>Bookmark content:</div>
  <div><textarea name="htmlContent" id="htmlContent" cols="130" rows="30">Capco
  CSR
    <A HREF="https://www.hetzner.com/">Dedicated Root Server, VPS &amp; Hosting - Hetzner Online GmbH</A>
    <A HREF="https://www.figma.com/proto/lNbwyOnbKkyImeW73zZ74O/APP---African-Honey-Bee?node-id=738%3A4308&starting-point-node-id=738%3A4308">Protótipo - Figma</A>
    <A HREF="https://tasks.office.com/capcoinc.onmicrosoft.com/EN-US/Home/Planner#/plantaskboard?groupId=702e3ef7-df7d-4a67-9ce5-74190e77f1a4&planId=jA_YA3JcIUa2HIDHYi9PJGUABRwL&taskId=ACs4ovzTgkiUPk611QAyEGUAIltD">Impact App - Planner</A>
    <A HREF="https://spring.io/guides/gs/spring-boot-docker/">Getting Started | Spring Boot with Docker</A>
    <A HREF="https://start.spring.io/#!type=maven-project&language=java&platformVersion=2.5.5&packaging=jar&jvmVersion=11&groupId=com.capco&artifactId=honeyapp&name=honeyapp&description=Community%20App%20HoneyApp&packageName=com.capco.honeyapp&dependencies=devtools,lombok,configuration-processor,web,postgresql,data-jpa">Spring Initializr</A>
    React
      <A HREF="https://medium.com/@tadeumx1/utilizando-mapas-no-react-native-817c4f4de6f7">Utilizando Mapas no React Native. Criando aplicações com mapa completos… | by Matheus Tadeu | Medium</A>
      <A HREF="https://materialdesignicons.com/">Material Design Icons</A>
    <A HREF="https://bitbucket.org/boldrocket/bankingwb_back/src/master/">boldrocket / bankingwb_back — Bitbucket</A>
    <A HREF="https://bitbucket.org/boldrocket/bankingwb_front/src/master/">boldrocket / bankingwb_front — Bitbucket</A>

Bradesco
  Onboarding
    FED TU
      <A HREF="https://192.168.248.61/pdpj-srv-gateway/pdpj-fed-registration/">PDPJ - Registration</A>
      <A HREF="https://192.168.248.61/pdpj-srv-gateway/pdpj-fed-authentication/">PDPJ - Authentication</A>
      <A HREF="https://192.168.248.61/pdpj-srv-gateway/pdpj-fed-authentication/login">PDPJ - Authentication - Login</A>
      <A HREF="https://192.168.248.61/pdpj-fed-financial-core/">PDPJ - Financial Core</A>
      <A HREF="https://192.168.248.61/pdpj-fed-bill-payment/">PDPJ - Quero Pagar</A>
      <A HREF="https://192.168.248.61/pdpj-fed-account-balance/">PDPJ - Quero Consultar</A>
    FED TI
      <A HREF="https://192.168.249.4/pdpj-fed-registration/">Registration</A>
      <A HREF="https://192.168.249.4/pdpj-srv-gateway/pdpj-fed-authentication/login">Login</A>
    Swagger
      TU
      <DL>
        <A HREF="https://pdpj-bff-authentication-pjl2.pj.cloud.corpd.bradesco.com.br/swagger-ui/">pdpj-bff-authentication</A>
        <A HREF="https://pdpj-srv-authentication-pjl2.pj.cloud.corpd.bradesco.com.br/swagger-ui/">pdpj-srv-authentication</A>
        <A HREF="https://pdpj-srv-registration-pjl2.pj.cloud.corpd.bradesco.com.br/swagger-ui/">pdpj-srv-registration</A>
        <A HREF="https://192.168.248.61/pdpj-srv-financial-core/swagger-ui/">pdpj-srv-financial-core</A>
        <A HREF="https://192.168.248.61/pdpj-bff-account-linkages/swagger-ui/#/V%C3%ADnculo%20de%20contas">pdpj-bff-account-linkages</A>
        <A HREF="https://192.168.248.61/pdpj-srv-account-linkages/swagger-ui/">pdpj-srv-account-linkages</A>
        <A HREF="https://192.168.248.61/pdpj-itg-account-linkages/swagger-ui/">pdpj-itg-account-linkages</A>
        <A HREF="https://192.168.248.61/pdpj-srv-identification-manager/swagger-ui/">pdpj-srv-identification-manager</A>
        <A HREF="https://192.168.248.61/pdpj-itg-identification-manager/swagger-ui/">pdpj-itg-identification-manager</A>
        <A HREF="https://pdpj-srv-authorization-server-pjl2.pj.cloud.corpd.bradesco.com.br/swagger-ui/">pdpj-srv-authorization-server</A>
      </DL>
      Local
      <DL>
        <A HREF="http://localhost:8073/pdpj-srv-financial-core/swagger-ui/">srv-financial-core Local Swagger UI</A>
        <A HREF="http://localhost:8094/swagger-ui/">ITG Authentication - Swagger UI</A>
        <A HREF="http://localhost:8093/swagger-ui/">SRV Authentication - Swagger UI</A>
        <A HREF="http://localhost:8092/swagger-ui/#/Controller%20de%20Autentica%C3%A7%C3%A3o">BFF Authentication - Swagger UI</A>
        <A HREF="http://localhost:8083/swagger-ui/">SRV Registration - Swagger UI</A>
        <A HREF="http://localhost:8082/swagger-ui/">BFF Registration - Swagger UI</A>
      </DL>
      <A HREF="https://pdpj-srv-authorization-transaction-pjl2.pj.cloud.corpd.bradesco.com.br/swagger-ui/">pdpj-srv-authorization-transaction</A>
</textarea></div>
  <div><button onclick="javascript:loadHtml()">Load</button></div>
</body>
<script>
  function loadHtml() {
    let list = document.getElementById("htmlContent").value.split("\n");
    let objResult = {parent: null, name: "root", items: []};
    let result = iterateArray(list, 0, objResult);
    console.log(result);
  }

  function iterateArray(list, index, parent, currentTabs = 0) {
    let lastObject = null;
    for (let i = index; i < list.length; i++) {
      let item = getItem(list[i]);
      if (item.type == "folder") {
        let child = {parent, name: item.name, items: []};
        if (item.tabs > currentTabs) {
          lastObject.items.push(child);
          // lastObject[item.name] = child;
          i = iterateArray(list, i + 1, child, item.tabs);
        } else if (item.tabs == currentTabs) {
          lastObject = child;
          parent.items.push(lastObject);
          // parent[item.name] = {parent, name: item.name, items: []};
        } else if (item.tabs < currentTabs) {
          return i;
        }
      } else {
        let tags = generateParentTags([], parent);
        parent.items.push({title: item.name, url: item.url, parent: parent, tags})
      }
    }
  }
  
  function generateParentTags(result, elObject) {
    result.push(elObject.name);
    if (elObject.parent) {
      generateParentTags(result, elObject.parent);
    }
    return result;
  }

  function getItem(el) {
    let tabs = countTabs(el);
    let type = el.includes("HREF") ? "boookmark": "folder";
    let name = null;
    let url = null;
    let result = null;
    if (type == "folder") {
      name = el.replace(/[\t\s]/g, "");
      result = {tabs, type, name};
    } else {
      //get HTML and internal text from 'A HREF="https://www.youtube.com/watch?v=L4jqow7NTVg">Single-Spa Intro - YouTube</A>'
      let bookmarkArray = el.replace(/.*HREF=\"(.*)\">(.*)<\/A>/,"$1||$2").split("||");
      url = bookmarkArray[0];
      name = bookmarkArray[1];
      result = {tabs, type, name, url};
    }
    
    return result;
  }
  function countTabs(el) {
    if (el && el[0] == " ") {
      // el.replace(/^?  /g, "\t").split("").filter(letter => letter == "\r").length;
      return el.replace(/(\s+).*/, "$1").length / 2;
    }
    return 0;
    
  }

  loadHtml()

  // document.addEventListener("keyup", keyup);
  // document.addEventListener("keydown", keydown);

  let alt = false;
  let number = false;

  function keyup(event) {
    if (alt && number && event.altKey && event.key != "Alt") {
      number = false;
      console.log('keyup', event.key);
    }
    if (alt && event.altKey && event.key == "Alt") {
      alt = false;
      console.log('keyup', event);
    }
  }

  function keydown(event) {
    if (alt && !number && event.altKey && event.key != "Alt") {
      number = true;
      console.log('keydown', event.key);
    }
    if (!alt && event.altKey && event.key == "Alt") {
      alt = true;
      console.log('keydown', event);
    }
    // event.stopPropagation();
    event.preventDefault();
    
  }

</script>
</html>